ОЧЕНЬ ПРОСТОЙ ЧАТ С ШИРОКОВЕЩАТЕЛЬНОЙ РАССЫЛКОЙ СООБЩЕНИЙ.НЕТ НИКНЕЙМОВ,БАЗЫ ДАННЫХ,ПРИВАТНЫХ СООБЩЕНИЙ И Т.П БУДЕТ ДОПОЛНЯТЬСЯ И УСЛОЖНЯТЬСЯ

Есть форма с полем для ввода данных и с кнопкой отправить(событие submit)
Сервер работает всегда в режиме прослушивания
алгоритм:
1)Вводим сообщение и нажимаем на кнопку отправки сообщения
2)В JS создаем объект XTR.С его помощью мы отправляем POST-запрос на URL /publish
3)в server.js приходит объект request. Смотрим его свойство URL и для случая /publish(опубликовать сообщение) выполняем чтение сообщения и проверку на то, чтобы оно не переполнило буфер и сервер не упал. Когда данные получены и прочитаны мы их разбираем как JSON и публикуем в чат.Функция публикации сообщения написана в файле chat.js. Там мы добавляем каждого подключившегося пользователя в массив и рассылаем это сообщение всем пользователям.
4)Также у нас всегда работает функция subscribe()(она вызывается при загрузке страницы + вызывает потом себя снова,если будет новый подключенный пользователь), которая отслеживает подключившихся пользователей. В ней мы также формируем объект XMR с GET-запросом на URL "/subscribe"
5)То есть как только кто-то зайдет в чат, то вызовется соотвественно функция subscribe(), которая передаст данные в server.js, которая в свою очередь передаст данные в chat.js и та добавит пользователя в массив clients. И затем эта функция опять вызовется в теле функции subscribe(),чтобы отслеживать других подключившихся пользователей к чату